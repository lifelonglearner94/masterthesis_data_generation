# Physics Configuration for Kubric Data Generation
# =================================================
# This file defines the parameter ranges for physics simulation

# Video specifications
video:
  resolution: 256
  num_frames: 32
  fps: 20
  simulation_fps: 240  # Internal simulation rate
  frame_step: 12       # Save every 12th step (240/20 = 12)
  format: "mp4"
  codec: "h264"
  bitrate: "50M"       # High bitrate for scientific quality

# Camera settings
camera:
  type: "static"
  angle_degrees: 45
  distance: 3.5
  focal_length: 35
  sensor_width: 32

# Environment
environment:
  background: "checkerboard"
  checkerboard_scale: 0.5
  ambient_light: 0.3
  key_light_intensity: 1.0

# Dynamic object (cube)
object:
  type: "cube"
  size_range: [0.3, 0.5]  # Random size between these values
  mass_range: [0.5, 2.0]  # kg (used in Phase A_1)
  mass_fixed: 1.0         # kg (used in Phase B and A_2)

# Friction settings
friction:
  # Normal distribution (for Phase A_1 and A_2)
  normal:
    min: 0.5
    max: 0.9
  # Slippery / OOD distribution (for Phase B)
  slippery:
    min: 0.01
    max: 0.15

# Restitution (bounciness)
restitution:
  min: 0.1
  max: 0.4

# Force impulse settings
force:
  # Magnitude range (Newtons)
  magnitude_min: 5.0
  magnitude_max: 25.0
  # Direction constraints (applied on XY plane primarily)
  apply_at_frame: 1  # Apply force between frame 1 and 2
  z_component_range: [-2.0, 2.0]  # Small vertical component

# Wall configuration
walls:
  enabled: true
  thickness: 0.1
  height: 1.0
  arena_size: 2.5
  friction: 0.8
  restitution: 0.3

# Dataset phase configuration
# Phase A_1: Random mass, normal friction (training)
# Phase B: Fixed mass, slippery/OOD friction
# Phase A_2: Fixed mass, normal friction (continuation)
dataset:
  # Phase definitions
  phase_a1:
    clips: 15000
    range: [0, 14999]
    mass_mode: "random"      # Use mass_range
    friction_mode: "normal"
  phase_b:
    clips: 1000
    range: [15000, 15999]
    mass_mode: "fixed"       # Use mass_fixed
    friction_mode: "slippery"
  phase_a2:
    clips: 1000
    range: [16000, 16999]
    mass_mode: "fixed"       # Use mass_fixed
    friction_mode: "normal"

  # Total clips
  total_clips: 17000

  # Legacy compatibility (for backwards compat with range-based logic)
  normal_clips: 16000        # Phase A_1 + A_2
  slippery_clips: 1000       # Phase B
  normal_range: [0, 14999]   # Phase A_1 (deprecated, use phase configs)
  slippery_range: [15000, 15999]  # Phase B (deprecated, use phase configs)
